%!TEX encoding = UTF-8 Unicode
%!TEX root = ../lect-w07.tex

%%%

\Subsection{StringBuilder}

\begin{Slide}{Förändringsbar eller oföränderlig?}
\begin{itemize}
\item Om den underliggande \Emph{oföränderliga} datastrukturen är \Alert{smart} implementerad så att den \Emph{återanvänder redan allokerade objekt} -- vilket ju är ofarligt eftersom de aldrig kommer att ändras -- så är oföränderlighet \Emph{minst lika snabbt} som förändring på plats.

\item Det är först när man gör \Alert{väldigt många} upprepade ändringar på, för datastrukturen ogynnsam plats, som det blir långsamt.

\item Hur många är ''väldigt många''?  \\ \pause $\rightarrow$ Det ska vi undersöka nu.

\end{itemize}
\end{Slide}

\begin{Slide}{String eller StringBuilder?}
\begin{itemize}
\item Strängar i JVM är \Emph{oföränderliga}.

\item Implementationen av sekvensdatastrukturen \code{java.lang.String} är \Alert{mycket effektivt} implementerad, där \Emph{redan allokerade objekt ofta kan återanvänds}.

\item \Alert{MEN} väldigt många tillägg på slutet blir långsamt. Därför finns den föränderliga \code{StringBuilder} metoden \code{append} som är snabbare än \code{+} på \code{String} vid mycket stora strängar. (Hur stora?)

\pause
\item Undersök dokumentationen för \code{StringBuilder} här:
{\SlideFontTiny\url{https://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html}}

\pause
\item För vilka teckensekvensalgoritmer är det lönt att använda \code{StringBuilder}? \\
\pause $\rightarrow$ Det ska vi undersöka nu.

\end{itemize}
\end{Slide}

\begin{Slide}{Timer}\SlideFontSmall
\setlength{\leftmargini}{0pt}
\begin{itemize}
\item \href{https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#currentTimeMillis--}{\code{System.currentTimeMillis}} ger tiden i millisekunder sedan januari 1970.

\item Med \code|Timer.measure{ xxx }| nedan kan man mäta tiden det tar för xxx.

\item Ett par \code{(elapsedMillis, result)} returneras som innehåller tiden det tar att köra blocket, samt resultatet av blocket.
\end{itemize}
\vspace{0em}\scalainputlisting[numbers=left,numberstyle=,basicstyle=\fontsize{6.5}{8}\ttfamily\selectfont]{../compendium/examples/workspace/w05-seqalg/src/Timer.scala}
\end{Slide}


\begin{Slide}{NanananananananaNanananananananaBatman}\SlideFontTiny
Prova denna kod:
\href{https://github.com/lunduniversity/introprog/blob/master/compendium/examples/workspace/w05-seqalg/src/NanananananananaNanananananananaBatman.scala}{compendium/examples/workspace/w05-seqalg/src/\\NanananananananaNanananananananaBatman.scala} \\

medan du lyssnar till: \href{https://www.youtube.com/watch?v=oDc-1zfffMw}{www.youtube.com/watch?v=oDc-1zfffMw}

\vspace{-0.7em}\scalainputlisting[numbers=left,numberstyle=,basicstyle=\ttfamily\SlideFontSize{4}{5}]{../compendium/examples/workspace/w05-seqalg/src/NanananananananaNanananananananaBatman.scala}
\end{Slide}
